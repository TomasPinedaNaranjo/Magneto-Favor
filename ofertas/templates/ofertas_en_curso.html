{% extends 'base.html' %} {% block content %}
<!-- <div class="container container-crear-oferta text-white">
  <h1>Ofertas en Curso</h1>
  <div class="row">
    <div class="offers-in-course col-md-12">
      <ul>
        {% for oferta in OfertasEnCurso %}
        <li>
          <div class="card bg-dark">
            <div class="card-body">
              <h5 class="card-title">{{ oferta.title }}</h5>
              <hr>
              <p class="card-text">{{ oferta.description }}</p>
              <div class="d-flex justify-content-between gap-1">
                <form method="post" action="{% url 'cancelar_oferta' oferta.id %}">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-warning">
                    Cancelar oferta
                  </button>
                </form>
      
                {% if oferta.aceptada_por == request.user and not oferta.terminada %}
                <form method="post" action="{% url 'servicio_terminado' oferta.id %}">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-success">Terminar servicio</button>
                </form>
              </div>
              {% endif %}
              
              </form>
            </div>
          </div>
        </li>
      </ul>
    </div>
    {% empty %}
    <div class="col-12">
      <p>No tienes ofertas en curso.</p>
    </div>
    {% endfor %}
  </div>
</div> -->

<div class="container container-crear-oferta text-white">
  <h1>Ofertas en Curso</h1>
  <hr />
  <div class="row">
    <div class="col-sm-12">
      <ul class="p-0">
        {% for oferta in OfertasEnCurso %}
        <div class="card bg-dark">
          <div class="card-header">
            <h3 class="card-title m-0">{{ oferta.title }}</h3>
          </div>
          <div class="card-body d-flex flex-column justify-content-between">
            <p class="card-text">{{ oferta.description }}</p>
            <!-- <hr /> -->
            <br />
            <div class="d-flex gap-2 justify-content-between align-items-end">
              <form
                method="post"
                action="{% url 'cancelar_oferta' oferta.id %}"
              >
                {% csrf_token %}
                <button type="submit" class="btn btn-warning">
                  Cancelar oferta
                </button>
              </form>

              <form
                method="post"
                action="{% url 'servicio_terminado' oferta.id %}"
              >
                {% csrf_token %}
                <button type="submit" class="btn btn-success">
                  Terminar servicio
                </button>
              </form>
            </div>
          </div>
        </div>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

<style>
  .offers-in-course,
  ul {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 15px;
  }

  li {
    list-style: none;
  }
</style>
{% endblock %}
